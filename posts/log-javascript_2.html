---
layout: post
title: javaScript 学習履歴(async/await fetch)
excerpt: javaScript、学習したこと(async/await fetch)
date: 2020-08-28
tags: log, javascript
author: sasami
---

##JavaScriptのオブジェクトのキーに変数の値を使う
JavaScriptのオブジェクトのプロパティにアクセスする方法には、ドット演算子とブラケット演算子の2つがあります。
---------------------------------------------
■ドット演算子
var user = { 'name':'Jonh', 'age':24, 'gender':'male'};
var userName = user.name;

■ブラケット演算子
var user = { 'name':'Jonh', 'age':24, 'gender':'male'};
var userName = user['name'];
---------------------------------------------

この、プリパティの指定を変数を使って行いたい場合には、ブラケット演算子を使用します。
---------------------------------------------
var user = { 'name':'Jonh', 'age':24, 'gender':'male'};
var plopaty = 'name';

var userName = user.plopaty; ←×エラー
var userName = user[plopaty]; ←〇値を取得できる
---------------------------------------------
【JavaScriptのオブジェクトのキーに変数の値を使うTips】
https://qiita.com/masarufuruya/items/d29a567d0ca4bbfb00cb




##fetchでDOG APIで犬の画像を取得して表示してみた
(Udemy:JavaScriptをとことんやってみよう: 67. fetch その1～  69. fetch その3)
■HTML
---------------------------------------------
<div id="dog" class="w300"></div>	
<div id="cat" class="w300"></div>
<div id="fox" class="w300"></div>
---------------------------------------------

■javaScript
---------------------------------------------
"use strict";

const dogUrl = 'https://dog.ceo/api/breeds/image/random';
const catUrl = 'https://aws.random.cat/meow';
const foxUrl = 'https://randomfox.ca/floof';

const options = {
	method: 'GET'
};

function fetchImage(url, options){
	return fetch(url, options)
		.then(response => {
			console.log(response);
			console.log(response.ok);
			console.log(response.status);
			if(response.ok){
				return response.json();
			}
			throw new Error('エラーです');
		
		}).catch(e => {
			console.log(e.message);
		});
}

async function getImage(url, options, id, key){
	const response = await fetchImage(url ,options);
	const imageDiv = document.getElementById(id);
	const imageElement = document.createElement('img');
	if(response){
		console.log(response);
		imageElement.src = response[key];
	} else {
		imageElement.src = 'img/err.jpg';
	}
	imageDiv.appendChild(imageElement);
}

getImage(dogUrl, options, 'dog', 'message');
getImage(catUrl, options, 'cat', 'file');
getImage(foxUrl, options, 'fox', 'image');
---------------------------------------------
